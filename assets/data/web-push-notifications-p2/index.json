{"hash":"bb7614b51e1677ad8e87a3127852889df016138e","data":{"post":{"title":"Web Push Notifications Part 2","date":"November 10, 2019","content":"<p>In this part we will add event listeners for the push event in the service worker.\nNext we will get the PushSubscription.</p>\n<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>TABLE OF CONTENTS</h2>\n<ul>\n<li>Handling Push Events</li>\n<li>Debug Push Notifications</li>\n<li>Getting the Push Subscription</li>\n<li>The Push Subscription</li>\n</ul>\n<h2 id=\"handling-push-events\"><a href=\"#handling-push-events\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>HANDLING PUSH EVENTS</h2>\n<p>When we send a push message to a user, the push event gets triggered in the service worker.\nTo show this push notification we need to trigger the notification in the service worker.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9\">self</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">addEventListener</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">push</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">data</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">data</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">json</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">title</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">icon</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">data</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">event</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">waitUntil</span><span style=\"color: #D8DEE9FF\">(</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">self</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">registration</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">showNotification</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">title</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #D8DEE9\">icon</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  )</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span></code></pre>\n<p>In this code snipped handles the push events.</p>\n<p>The <strong>registration.showNotification()</strong> method returns a promise, that is resolved when the notification is shown.\nThe <strong>event.waitUntil()</strong> method tells the browser that work is ongoing until the promise settles.\nThis extends the lifetime of the push event until the showNotification Promise resolves.</p>\n<h2 id=\"debug-push-notifications\"><a href=\"#debug-push-notifications\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>DEBUG PUSH NOTIFICATIONS</h2>\n<p>To test that our push event handler works, we can send a fake push message with the Chrome DevTools.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1000 440' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29df6ca25ff67ccebabb8351124da8f2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29df6ca25ff67ccebabb8351124da8f2)' width='1000' height='440' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIZ0lEQVRYw81YaXfaSBD0//83yVdv7DjrbBKvYwM2IAQSpwBJgLhPodquFiIYY%2bLYcd7qvUZiNJqjpo/qPmm2Wmg5dVitETLlAXpBH%2bPREPV6HeVyWe%2bVSgXdbhfj8RiO05C2hrY5ThOTyQSe66JWq8FpyDuR4XCIwWAA27K0vVqtotlsad92u63fUvgukX6/j6F8U91pd10P0%2bkEQdeDXSqgVrZQr1rybKLbcTGdjNFoODrXaDR6KDJe8PkfdDwfA%2b87vHYNQX%2bATqej6%2bM6LFnfSa0mmy8WkK%2bPcFfuy0Z70mGgCyyWSrBtG5aI53n6IRdm22UUTROVak0nawuIpVJRvymLcDP9IJA%2bBZ2kJOM4jhP3bbd0zBiEsr7n%2bN1eNwbNtvR9qWTJ5uro9MfImE2cXqZweZ3H5xsTF1d53BaacLsj7RPIXAnoKnyWtuDqX/hyOEHzAq2GJYc7QKvV1PW1ZM0KwHA40pPlIH1%2bzMULUmzjia3XayRXFEV4dO20sS/7rFYrleQbCt8tl0uEYbht2xX25/sH7esQg8kSlc4aTh9oUALAGQBlaesMlzIBx42/fSBcg8zP%2bVayhXDNOZYP5uEeTyqi5qnULYrFEnK5HO7v7%2bH7Hd08UeXFjrm8gYpoiyknUxO1u8/lkTNM5I2CtNno9YJHIO1v8lDb7rvjV7QnP1qf/iQ62ms6neKEakm1pprSPmjPfseXDfUUAC6OiDlNUZ3BEJ6A05XNEiRfzMXzfbTFzmazOV5/HQZn/YRErxBePOSTxWIBU%2bz5/fv3Yk8N5HNZGIaBQsFUp8FrNpthIlpAu26JDROcUFSadjSVQQL532676ihpPkHQE4B88Rs%2bJoIyzasnNk4/wj58x/80OVcA70kbwV/vaMlbXg8AoKe/ubnB6ekpMpkMbm9vkU6ntY0mkQDQ7we6ES6eG%2bfGGurxB%2br96eV9P94gN8TNMsLM5nN1OgSJ0YAb1j69rpoNx3LdNjrStl4fN5PfKVsAqP7c%2bMePH5EV%2b09n0gpAOpUSLShsndZr0X7ORUf5p2TrBGkCxWIR7969Q1NCVS6bBUMjzaJer22jAIGgsD89aTLI7z6V36Xiu/4j2vMZiaapBtAJ0qabzTg%2bxvYZqJpS5RMALHGSKdGMq6srNQ9fbDae7LlA4MEz3lC1VxL3bktjfEr38eFGYn5viXt7jC%2b5If7JDvEx1YdRn2Exn5IHDFUVGBJ432dUCQC8Jyf/MrOIHoSnt/BzuyAsBYTFMhae%2bCqM9Hm2iNvCNZRlnlSFjeXzebV/ev7RHgi7RGj/IrGgg6QowZBJh9MQw0moE01mIfrjlfxfYSqsJBTHOGt5SlDwBEf4PSA8r6%2baQLBRf0YDqj%2bppLJCMQc%2bJwAcUjUiSE7N72bTMZrdJa4KI6RE/TL2BN/Nscq/0lb0xFTEjLy0ieHqdc7yZw73l6IAN8lwd3FxobyaHKBUJMMzlCDtAvCzBa/ENJSCrngXhykUdaHUdKXOc0lnSvXcONLlhpay/5%2bI//tmsgWAyQcdGzM/bpr3xibrO0RO9pFOQGI8z2TzmkRlhSpX647Q5qaMHydWJaHMTrMtGaODqkSaomVruyNmsX9ybwXIQQAYBund6xtKnKTBlOdqQHSElb9kI2%2blDY8AmAtTowacn5%2bLL3DUHMplW04wC1OIUHREA5IMTzM/aQom4jsmfQkvCx2ckYUmMBeVpwkwX2B/zjmXPmoy8p9sMSYokTrS9Z/UAC6Sufm3b9/gbooVNaGsPH3WBhjnnwJgsZhrnt%2bUHHs%2bWeCudYdb60Z8iYuSZWsCZZUrmkGaomWpuxxs%2bc8MkrWEutMSE7CQzRfEJOS/v8Jf3yWvCBYxwEcc2EvBeQQAQxg5%2btevX9X%2byQAJQKFgaDL01IRvpaLr6G3N46APoAO8vLzUyg6rJIbwApa7SIwO%2bYAfjGu1VXWSIz6zpEYukRRVmDrHBZe%2bPut74Res2jChionYBEMyUgm//HawaZtMpiJj5RQ9iZ1j4Rjr6NcTpkOO%2bwEAST2A2RwzPKq/K6TlZwBw45rNielwsaTPWcOEVanCMMXr22Xc503Ym/9U9VyhiIJoGf8XrTJMMZVqrSH3spqDUbRQKIojFhMpFG3UZC29UYjL%2bwGuzRFmy7W63P26wHqHAMW0%2bwf3PFSk2QLATdKW6aSSMhiFp8TT%2bRUe8H%2b44nVt5Dka0JR4TwdFDaCactOJ7FLhp1CkFlB9CeBUvLzRnsD0Jfmo93HfGIpT9OQ%2bQEHargsO0tUe0pUubrRd3tsdpOS/0Z7Ks6/CPmzL1AL9n6nKvdzR/mzLyPusM9I73xvuDHf1gVDvhUScFRrdhcpY%2bDfrikcB8DxXVZ7enBtJEiLej5nAFgAZhEUOTaamM1xXhQq3Q3y1eviUd3GWqeFLqattH27L%2bJCq4tLwcHpj4fzOwd/S5y9pv65NcJ6py3NF%2bvekX0X7se38roGLrINPuZaM18BZuqpjfzZ9HfOqMpJvxNcIAGSdpfYSN5WF5iUEIDoGAE%2bOPODs7Exr/uQB1AYmSIwOx8LO02YRHc8GD7VH4YG%2b0ZGCaPTwW5E4U2WiEUsYLh9xikcA8IeOj5GAzizRBrYx0TmWYCTlMpbAFoulmgGLpq4f1/jbro9Od1NA7fTQars6ptfpoinPY5mb44QbEvTyCk%2b03fxCTMB2l6h2VptUOHwymdsSIZ703xIGbauETOZOT98w8kqJ12F4NBYTABY0E7bHKrErG9Zqs%2bQS3U1xxfV8AcTTfIFV5EazpSGPi2cIfW2JS%2bv/qzj5Mpw5LFeY52K1BeDQ2rUsvuv0ErtnDE6ek%2bLHoRLYfq3gJUWSt6j3CZ1SiTba8dS6ub//AC1JEwe7/nBRAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1000\" alt=\"Chrome DevTools\" data-srcset=\"/assets/static/chrome-dev-tools.82a2fbd.104d49fd853c0ac67848a38ae3fc311f.png 480w, /assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png 1000w\" data-sizes=\"(max-width: 1000px) 100vw, 1000px\" data-src=\"/assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png\" width=\"1000\" alt=\"Chrome DevTools\"></noscript></p>\n<p>To do this you can copy and paste the JSON example below.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">New Blog Post: Web Push Notifications Part 1</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">body</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">Get a better understanding of how Web Push Notifications work</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span></span></code></pre>\n<p>Now after clicking push, the push notification should be shown.</p>\n<h2 id=\"getting-the-push-subscription\"><a href=\"#getting-the-push-subscription\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>GETTING THE PUSH SUBSCRIPTION</h2>\n<p>Before we can send push messages, we need to get the push subscription.\nWe do this by calling the <strong>registration.pushManager.subscribe()</strong> method.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #81A1C1\">async</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">function</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">subscribeUser</span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">registration</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">navigator</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">serviceWorker</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">ready</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">subscription</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">registration</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">pushManager</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">subscribe</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">userVisibleOnly</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">applicationServerKey</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">urlBase64ToUint8Array</span><span style=\"color: #D8DEE9FF\">(</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">BBAtkVJ3LU8ab8R49xs-WD3PVt7tfLmWcDZHH8zN01ZfUTEc3VTs2PQlpsZxTbAeNPe11vRwaCkf2DpQZ2LTsG8</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    )</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #81A1C1\">JSON</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">stringify</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">subscription</span><span style=\"color: #D8DEE9FF\">))</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">subscription</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span></span></code></pre>\n<p>To get back the subscription object, we need to pass in <strong>userVisibleOnly</strong>, and the\n<strong>applicationServerKey</strong>.</p>\n<p><strong>userVisibleOnly</strong>:\\\nYou must pass in a value of true. This means that you should not send silent pushes - web pushes without showing a notification.</p>\n<p>This was added because people were scared that the Push API might be abused for malicious stuff,\nwithout the user knowing.</p>\n<p><strong>applicationServerKey</strong>:\\\nThe applicationServerKey is used by the push service of the browser to identify your web app.\nIt is the public key that we are sending here, there also is a private key that should be - you guessed it - kept private.\nWe will need it later to send push messages.</p>\n<p>To generate the KeyPair you can head over to <a href=\"https://web-push-codelab.glitch.me/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">web-push-codelab.glitch.me</a>.</p>\n<h2 id=\"the-push-subscription\"><a href=\"#the-push-subscription\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>THE PUSH SUBSCRIPTION</h2>\n<p>The subscription that gets returned from <strong>registration.pushManager.subscribe()</strong> method looks like this:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">endpoint</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">https://fcm.googleapis.com/fcm/send/cR3Ymg9at0M:APA91bHXt5kDJ__JY-L3ZmrcC3VOlnF400_s9HvZQgmyjM9tbqxvLRrQuTBeRQoifxMItb_cTQ3Sxl7t553R2Y53dQSBncStFdu99A8qejCamh4XHeJKVCS3bEEM1fCOPLEuZPg7BJqn</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">expirationTime</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">null</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">keys</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">p256dh</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">BO8IrAO6iEJOpVVkCBMMGt_iBAWUMWdjc4r9GOqiRS1rmPR5KYtZhnkeBb5fHqHp7pudxY6Dy8neJPgNwmKn4q8</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">auth</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">CPWYdCPWXfICigMixAqJ4g</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span></span></code></pre>\n<p>The most important property is the <strong>endpoint</strong>. The endpoint is the push services URL. To create a push message we need to send our message to this URL. The endpoint is also a user ID because every endpoint is unique to one user.</p>\n<p>Once we have the push subscription from a user, we can finally send web push messages to this user.</p>\n<p>In Part 3 we will get into the server side of things.</p>\n","tags":[{"title":"JavaScript","path":"/tag/JavaScript/"},{"title":"Service Worker","path":"/tag/Service%20Worker/"},{"title":"Frontend","path":"/tag/Frontend/"}]}},"context":{}}