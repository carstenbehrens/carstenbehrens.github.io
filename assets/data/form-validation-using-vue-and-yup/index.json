{"hash":"da824852c8f4708a7821854b0b7a5861a5bf4d84","data":{"post":{"title":"Vue Form Validation using Yup","date":"January 30, 2023","content":"<p>This blog post will show you how to validate forms in Vue 3 using Yup.</p>\n<h2 id=\"setup\"><a href=\"#setup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setup</h2>\n<p>In this blog post, I will use the following setup:</p>\n<ul>\n<li>Vue 3 with TypeScript, Prettier, and ESLint.</li>\n<li>Yup, for form validation.</li>\n</ul>\n<p>If you don't use TypeScript, you can skip the parts specific to TypeScript.</p>\n<p>Before we can start, we will have to add Yup as a dependency in our project.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">npm install yup</span></span></code></pre>\n<h2 id=\"simple-form-validation\"><a href=\"#simple-form-validation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Simple Form Validation</h2>\n<h3 id=\"creating-a-form\"><a href=\"#creating-a-form\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating a form</h3>\n<p>First, we will create a simple form with a single input field.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #81A1C1\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;form</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">@</span><span style=\"color: #8FBCBB\">submit</span><span style=\"color: #D8DEE9FF\">.</span><span style=\"color: #8FBCBB\">prevent</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9\">validateForm</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;label</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">for</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\">Name</span><span style=\"color: #81A1C1\">&lt;/label&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;input</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">id</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">v-model</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> /</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;button</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">submit</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\">Submit</span><span style=\"color: #81A1C1\">&lt;/button&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;/form&gt;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;/template&gt;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;script</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">setup</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">lang</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">ts</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">reactive</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">vue</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">reactive</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;/script&gt;</span></span></code></pre>\n<h3 id=\"adding-a-validation-schema\"><a href=\"#adding-a-validation-schema\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Adding a validation schema</h3>\n<p>Now that we have a form, we can add a validation schema. To do this, we will use Yup.</p>\n<p>Yup allows us to create a schema containing each field's rules. In our case, we only have one field, <code>name</code>.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">object</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">string</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">yup</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">schema</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">object</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">string</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">required</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">Name is required</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span></code></pre>\n<p>The field <code>name</code> should be a string and is required.\nPlease note that when using Yup, if a string is required, then an empty string is not allowed.</p>\n<h3 id=\"validating-the-form-input\"><a href=\"#validating-the-form-input\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validating the form input</h3>\n<p>We can validate the form input now that we have our form and schema.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">validateForm</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">try</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">schema</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">validateSync</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">catch</span><span style=\"color: #D8DEE9FF\"> (</span><span style=\"color: #D8DEE9\">error</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">error</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span></span></code></pre>\n<p>We'll show an error message in the console if the validation fails.</p>\n<p>Our complete component looks like this:</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #81A1C1\">&lt;template&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;form</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">@</span><span style=\"color: #8FBCBB\">submit</span><span style=\"color: #D8DEE9FF\">.</span><span style=\"color: #8FBCBB\">prevent</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9\">validateForm</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;label</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">for</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\">Name</span><span style=\"color: #81A1C1\">&lt;/label&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;input</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">text</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">id</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">v-model</span><span style=\"color: #ECEFF4\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> /</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">&lt;button</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">submit</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\">Submit</span><span style=\"color: #81A1C1\">&lt;/button&gt;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">&lt;/form&gt;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;/template&gt;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;script</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">setup</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">lang</span><span style=\"color: #D8DEE9FF\">=</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">ts</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">object</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">string</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">yup</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">reactive</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">vue</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">reactive</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">schema</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">object</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">string</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">required</span><span style=\"color: #D8DEE9FF\">()</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">validateForm</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #81A1C1\">try</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">schema</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">validateSync</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">formInput</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">catch</span><span style=\"color: #D8DEE9FF\"> (</span><span style=\"color: #D8DEE9\">error</span><span style=\"color: #D8DEE9FF\">) </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">error</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&lt;/script&gt;</span></span></code></pre>\n<p>Now that we have a simple form validation, we can address some missing features.</p>\n<ul>\n<li>Our form only has one field</li>\n<li>We don't show any error messages to the user; without this the user will not know what went wrong.</li>\n<li>We only validate the form when the user submits the form,\nthe user experience would be improved if we validated the form as the user types.</li>\n</ul>\n<p>I'll address these issues in another blog post if there is enough interest.</p>\n","tags":[{"title":"JavaScript","path":"/tag/JavaScript/"},{"title":"Frontend","path":"/tag/Frontend/"},{"title":"Vue","path":"/tag/Vue/"},{"title":"Yup","path":"/tag/Yup/"}]}},"context":{}}