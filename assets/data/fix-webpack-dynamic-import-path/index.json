{"hash":"6fdb253b8eb52e1b4d0778027bea29b152fb4552","data":{"post":{"title":"How to Fix Webpack Dynamic Import with Wrong Path","date":"November 20, 2020","content":"<p>When using the dynamic import for code splitting you'll need to specify the\n<a href=\"https://webpack.js.org/guides/public-path/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">publicPath</a> option to let Webpack\nknow where your assets are.</p>\n<p>Here is an example:</p>\n<p><strong>webpack.config.js</strong></p>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">output</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  filename</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">[name].[contenthash].js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  path</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">path</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">join</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">__dirname</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">public/__assets</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  publicPath</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">/__assets/</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">},</span></span></code></pre>\n<p><strong>path</strong><br>\nAll our bundle files are saved into the directory specified in this entry.\nSo in my case, all my Javascript files are saved under \"/public/__assets\".</p>\n<p><strong>publicPath</strong><br>\nWhen using the dynamic import, webpack will just generate script tags in your HTML\nthat will point to the files with this prefix added.</p>\n<p>In my case, this would be \"/public/__assets\".</p>\n<p>If you leave this blank <strong>it defaults to \"/\"</strong> meaning that the browser would try\nto find the requested Javascript file under /[chunkname].js</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 454 63' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-35a71218afd09052d8dd113a5ff03ba2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-35a71218afd09052d8dd113a5ff03ba2)' width='454' height='63' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAJAEADASIAAhEBAxEB/8QAGwAAAgIDAQAAAAAAAAAAAAAAAAUBAwIEBgj/xAAvEAABAgMECAUFAAAAAAAAAAABAgMABBESIUFyExQxMjRhccEFIiNRsTNUgdHw/8QAFwEBAQEBAAAAAAAAAAAAAAAAAwQBAv/EACQRAAIBAAkFAAAAAAAAAAAAAAECAAQREyExkaHR0hIUM0NR/9oADAMBAAIRAxEAPwD0EZh6rXrpvX93t5c%2bkQ9Muh54KmEpIJqNcpS/2wh4rebzn4jM7yv7GIHoTH2tptF6x8iQzD2kZq4kVpQayfNeL%2bcDcw9qksUupskEpVrJ89%2b2p29Yfj6iMsQdiOneNNDaqq2fMcZyGvwnLTUysOPoVOBCgoVQJqzZKhcLxUbtadfeCRnHVPBpvxEOW0k2TMpUaVwqO8M/EuKcjUVhmEVCgsVqtnzXjAL34DXeWaeYLAOlTZTdaEzQkjH9wS80%2bibTZdbWpYuQqZqPwMYayfBDMfmLG%2bITk7wHZsD5WzHGOr3YT//Z' /%3e%3c/svg%3e\" width=\"454\" alt=\"script-tag\" data-srcset=\"/assets/static/script-tag.b28486f.410a143162344c730a2545d7e242399f.jpg 454w\" data-sizes=\"(max-width: 454px) 100vw, 454px\" data-src=\"/assets/static/script-tag.b28486f.410a143162344c730a2545d7e242399f.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/script-tag.b28486f.410a143162344c730a2545d7e242399f.jpg\" width=\"454\" alt=\"script-tag\"></noscript></p>\n<p>If the browser cannot find this file you will see the error:\nUncaught (in promise) ChunkLoadError: Loading chunk failed.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 551 38' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-51cf944040213b4a0dbd75f53fda4671'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-51cf944040213b4a0dbd75f53fda4671)' width='551' height='38' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAEAEADASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAIDBAUI/8QAJRAAAgEEAgEDBQAAAAAAAAAAAQIDAAQRIRIxEwUVIjJBUWHR/8QAGAEAAgMAAAAAAAAAAAAAAAAAAQMAAgX/xAAbEQEBAAEFAAAAAAAAAAAAAAABABECEjEyYf/aAAwDAQACEQMRAD8A6Bv%2bVo0ccckpHEtlpGJ2x/dVNcSxTJEHdhKqsSzEkZJ63rqlKQc2pq6D7VT3kwckO29fW39qm69RnWezCsQJg3L5NrjoY3SlWxLFoe43EbwgMT5ERzydjgkjrfW63Ccp7mFWllUSQiQ8XIwT%2bKUoRF3Wa1qGYkyz7GMCQj7Yo1qCxPlmGTnTnVKVIZc3/9k=' /%3e%3c/svg%3e\" width=\"551\" alt=\"error\" data-srcset=\"/assets/static/error.71e1d12.2c84c18b4d801c7d837378dab0974a14.jpg 551w\" data-sizes=\"(max-width: 551px) 100vw, 551px\" data-src=\"/assets/static/error.71e1d12.2c84c18b4d801c7d837378dab0974a14.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/error.71e1d12.2c84c18b4d801c7d837378dab0974a14.jpg\" width=\"551\" alt=\"error\"></noscript></p>\n","tags":[{"title":"JavaScript","path":"/tag/JavaScript/"},{"title":"Webpack","path":"/tag/Webpack/"},{"title":"Frontend","path":"/tag/Frontend/"}]}},"context":{}}