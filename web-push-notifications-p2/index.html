<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Web Push Notifications Part 2 - Carsten Behrens Blog</title><meta name="gridsome:hash" content="9efef34e3be661c6a6bbe3ec7eb87feea5dc356d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="keywords" content="Vue,React,JavaScript,TypeScript,Vue.js,VueJS"><meta data-vue-tag="ssr" name="description" content="Carsten Behrens Blog"><meta data-vue-tag="ssr" name="author" content="Carsten Behrens"><meta data-vue-tag="ssr" data-key="description" name="description" content="A Blog about JavaScript and Web Development"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.0191dfca28960a65c4efbd1d6c4f782a.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,700"><link rel="preload" href="/assets/css/0.styles.4fcd4b2d.css" as="style"><link rel="preload" href="/assets/js/app.957787dd.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.7d448d5a.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.a95b944c.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.ba7bb25a.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.867dc169.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.f9ca0d6d.js"><link rel="stylesheet" href="/assets/css/0.styles.4fcd4b2d.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="content-wrapper bg-background-primary font-sans text-copy-primary leading-normal flex flex-col min-h-screen"><header class="top-0 left-0 z-40 fixed w-full border-t-14"><nav class="container mx-auto flex flex-col sm:flex-row py-8 justify-end"><div class="block lg:hidden self-end sm:self-auto"><button data-cypress="hamburger" title="menu" class="flex items-center px-3 py-2 border rounded border-gray-500 hover:text-gray-600 hover:border-gray-600"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="current-color h-3 w-3"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" fill="gray"></path></svg></button></div><ul data-cypress="menu" class="uppercase tracking-wide font-bold w-full block flex-grow lg:space-x-8 space-y-6 lg:space-y-0 lg:flex lg:flex-initial lg:w-auto items-center mt-8 lg:mt-0 hidden"><li class="mb-6 lg:mb-0 sm:w-64"><div class="relative" data-v-4e1ed704><div data-v-3ae9f24e data-v-4e1ed704></div><div class="relative w-full" data-v-4e1ed704><input type="text" placeholder="Search (Press  "/" to focus)" data-cypress="search" value="" class="bg-background-form border border-gray-500 rounded-full px-4 pl-10 py-2 outline-none focus:border-blue-500 w-full" data-v-4e1ed704><div class="absolute top-0 ml-3" style="top:10px" data-v-4e1ed704><svg fill="currentColor" viewBox="0 0 24 24" width="24" height="24" class="text-gray-500 h-5 w-5" data-v-4e1ed704><path d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" class="heroicon-ui" data-v-4e1ed704></path></svg></div><!----></div><!----></div></li><li><a href="#" data-cypress="switchTheme" class="text-copy-primary hover:text-gray-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a></li><li><a href="/" class="text-copy-primary hover:text-gray-600 active">Home</a></li><li><a href="/blog" data-cypress="blog" class="text-copy-primary hover:text-gray-600">Blog</a></li></ul></nav></header><main class="flex flex-col flex-grow overflow-hidden pt-24"><div class="container-inner mx-auto my-16"><h1 class="text-4xl font-bold leading-tight">Web Push Notifications Part 2</h1><div class="text-xl text-gray-600 mb-4">November 10, 2019</div><div class="flex mb-8 text-sm"><a href="/tag/JavaScript/" class="tag rounded-full px-4 py-2 mr-4 hover:bg-blue-300">
        JavaScript
      </a><a href="/tag/Service%20Worker/" class="tag rounded-full px-4 py-2 mr-4 hover:bg-blue-300">
        Service Worker
      </a><a href="/tag/Frontend/" class="tag rounded-full px-4 py-2 mr-4 hover:bg-blue-300">
        Frontend
      </a></div><div class="markdown-body mb-8"><p>In this part we will add event listeners for the push event in the service worker.
Next we will get the PushSubscription.</p>
<h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true"><span class="icon icon-link"></span></a>TABLE OF CONTENTS</h2>
<ul>
<li>Handling Push Events</li>
<li>Debug Push Notifications</li>
<li>Getting the Push Subscription</li>
<li>The Push Subscription</li>
</ul>
<h2 id="handling-push-events"><a href="#handling-push-events" aria-hidden="true"><span class="icon icon-link"></span></a>HANDLING PUSH EVENTS</h2>
<p>When we send a push message to a user, the push event gets triggered in the service worker.
To show this push notification we need to trigger the notification in the service worker.</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #D8DEE9">self</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">addEventListener</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">push</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">event</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=&gt;</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">data</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">event</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">data</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">json</span><span style="color: #D8DEE9FF">()</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">title</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">body</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">icon</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">data</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">event</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">waitUntil</span><span style="color: #D8DEE9FF">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">self</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">registration</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">showNotification</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">title</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">      </span><span style="color: #D8DEE9">body</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">      </span><span style="color: #D8DEE9">icon</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">  )</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span></code></pre>
<p>In this code snipped handles the push events.</p>
<p>The <strong>registration.showNotification()</strong> method returns a promise, that is resolved when the notification is shown.
The <strong>event.waitUntil()</strong> method tells the browser that work is ongoing until the promise settles.
This extends the lifetime of the push event until the showNotification Promise resolves.</p>
<h2 id="debug-push-notifications"><a href="#debug-push-notifications" aria-hidden="true"><span class="icon icon-link"></span></a>DEBUG PUSH NOTIFICATIONS</h2>
<p>To test that our push event handler works, we can send a fake push message with the Chrome DevTools.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1000 440' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29df6ca25ff67ccebabb8351124da8f2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29df6ca25ff67ccebabb8351124da8f2)' width='1000' height='440' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIZ0lEQVRYw81YaXfaSBD0//83yVdv7DjrbBKvYwM2IAQSpwBJgLhPodquFiIYY%2bLYcd7qvUZiNJqjpo/qPmm2Wmg5dVitETLlAXpBH%2bPREPV6HeVyWe%2bVSgXdbhfj8RiO05C2hrY5ThOTyQSe66JWq8FpyDuR4XCIwWAA27K0vVqtotlsad92u63fUvgukX6/j6F8U91pd10P0%2bkEQdeDXSqgVrZQr1rybKLbcTGdjNFoODrXaDR6KDJe8PkfdDwfA%2b87vHYNQX%2bATqej6%2bM6LFnfSa0mmy8WkK%2bPcFfuy0Z70mGgCyyWSrBtG5aI53n6IRdm22UUTROVak0nawuIpVJRvymLcDP9IJA%2bBZ2kJOM4jhP3bbd0zBiEsr7n%2bN1eNwbNtvR9qWTJ5uro9MfImE2cXqZweZ3H5xsTF1d53BaacLsj7RPIXAnoKnyWtuDqX/hyOEHzAq2GJYc7QKvV1PW1ZM0KwHA40pPlIH1%2bzMULUmzjia3XayRXFEV4dO20sS/7rFYrleQbCt8tl0uEYbht2xX25/sH7esQg8kSlc4aTh9oUALAGQBlaesMlzIBx42/fSBcg8zP%2bVayhXDNOZYP5uEeTyqi5qnULYrFEnK5HO7v7%2bH7Hd08UeXFjrm8gYpoiyknUxO1u8/lkTNM5I2CtNno9YJHIO1v8lDb7rvjV7QnP1qf/iQ62ms6neKEakm1pprSPmjPfseXDfUUAC6OiDlNUZ3BEJ6A05XNEiRfzMXzfbTFzmazOV5/HQZn/YRErxBePOSTxWIBU%2bz5/fv3Yk8N5HNZGIaBQsFUp8FrNpthIlpAu26JDROcUFSadjSVQQL532676ihpPkHQE4B88Rs%2bJoIyzasnNk4/wj58x/80OVcA70kbwV/vaMlbXg8AoKe/ubnB6ekpMpkMbm9vkU6ntY0mkQDQ7we6ES6eG%2bfGGurxB%2br96eV9P94gN8TNMsLM5nN1OgSJ0YAb1j69rpoNx3LdNjrStl4fN5PfKVsAqP7c%2bMePH5EV%2b09n0gpAOpUSLShsndZr0X7ORUf5p2TrBGkCxWIR7969Q1NCVS6bBUMjzaJer22jAIGgsD89aTLI7z6V36Xiu/4j2vMZiaapBtAJ0qabzTg%2bxvYZqJpS5RMALHGSKdGMq6srNQ9fbDae7LlA4MEz3lC1VxL3bktjfEr38eFGYn5viXt7jC%2b5If7JDvEx1YdRn2Exn5IHDFUVGBJ432dUCQC8Jyf/MrOIHoSnt/BzuyAsBYTFMhae%2bCqM9Hm2iNvCNZRlnlSFjeXzebV/ev7RHgi7RGj/IrGgg6QowZBJh9MQw0moE01mIfrjlfxfYSqsJBTHOGt5SlDwBEf4PSA8r6%2baQLBRf0YDqj%2bppLJCMQc%2bJwAcUjUiSE7N72bTMZrdJa4KI6RE/TL2BN/Nscq/0lb0xFTEjLy0ieHqdc7yZw73l6IAN8lwd3FxobyaHKBUJMMzlCDtAvCzBa/ENJSCrngXhykUdaHUdKXOc0lnSvXcONLlhpay/5%2bI//tmsgWAyQcdGzM/bpr3xibrO0RO9pFOQGI8z2TzmkRlhSpX647Q5qaMHydWJaHMTrMtGaODqkSaomVruyNmsX9ybwXIQQAYBund6xtKnKTBlOdqQHSElb9kI2%2blDY8AmAtTowacn5%2bLL3DUHMplW04wC1OIUHREA5IMTzM/aQom4jsmfQkvCx2ckYUmMBeVpwkwX2B/zjmXPmoy8p9sMSYokTrS9Z/UAC6Sufm3b9/gbooVNaGsPH3WBhjnnwJgsZhrnt%2bUHHs%2bWeCudYdb60Z8iYuSZWsCZZUrmkGaomWpuxxs%2bc8MkrWEutMSE7CQzRfEJOS/v8Jf3yWvCBYxwEcc2EvBeQQAQxg5%2btevX9X%2byQAJQKFgaDL01IRvpaLr6G3N46APoAO8vLzUyg6rJIbwApa7SIwO%2bYAfjGu1VXWSIz6zpEYukRRVmDrHBZe%2bPut74Res2jChionYBEMyUgm//HawaZtMpiJj5RQ9iZ1j4Rjr6NcTpkOO%2bwEAST2A2RwzPKq/K6TlZwBw45rNielwsaTPWcOEVanCMMXr22Xc503Ym/9U9VyhiIJoGf8XrTJMMZVqrSH3spqDUbRQKIojFhMpFG3UZC29UYjL%2bwGuzRFmy7W63P26wHqHAMW0%2bwf3PFSk2QLATdKW6aSSMhiFp8TT%2bRUe8H%2b44nVt5Dka0JR4TwdFDaCactOJ7FLhp1CkFlB9CeBUvLzRnsD0Jfmo93HfGIpT9OQ%2bQEHargsO0tUe0pUubrRd3tsdpOS/0Z7Ks6/CPmzL1AL9n6nKvdzR/mzLyPusM9I73xvuDHf1gVDvhUScFRrdhcpY%2bDfrikcB8DxXVZ7enBtJEiLej5nAFgAZhEUOTaamM1xXhQq3Q3y1eviUd3GWqeFLqattH27L%2bJCq4tLwcHpj4fzOwd/S5y9pv65NcJ6py3NF%2bvekX0X7se38roGLrINPuZaM18BZuqpjfzZ9HfOqMpJvxNcIAGSdpfYSN5WF5iUEIDoGAE%2bOPODs7Exr/uQB1AYmSIwOx8LO02YRHc8GD7VH4YG%2b0ZGCaPTwW5E4U2WiEUsYLh9xikcA8IeOj5GAzizRBrYx0TmWYCTlMpbAFoulmgGLpq4f1/jbro9Od1NA7fTQars6ptfpoinPY5mb44QbEvTyCk%2b03fxCTMB2l6h2VptUOHwymdsSIZ703xIGbauETOZOT98w8kqJ12F4NBYTABY0E7bHKrErG9Zqs%2bQS3U1xxfV8AcTTfIFV5EazpSGPi2cIfW2JS%2bv/qzj5Mpw5LFeY52K1BeDQ2rUsvuv0ErtnDE6ek%2bLHoRLYfq3gJUWSt6j3CZ1SiTba8dS6ub//AC1JEwe7/nBRAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="1000" alt="Chrome DevTools" data-srcset="/assets/static/chrome-dev-tools.82a2fbd.104d49fd853c0ac67848a38ae3fc311f.png 480w, /assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png 1000w" data-sizes="(max-width: 1000px) 100vw, 1000px" data-src="/assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/chrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png" width="1000" alt="Chrome DevTools"></noscript></p>
<p>To do this you can copy and paste the JSON example below.</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">title</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">New Blog Post: Web Push Notifications Part 1</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">body</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">Get a better understanding of how Web Push Notifications work</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>Now after clicking push, the push notification should be shown.</p>
<h2 id="getting-the-push-subscription"><a href="#getting-the-push-subscription" aria-hidden="true"><span class="icon icon-link"></span></a>GETTING THE PUSH SUBSCRIPTION</h2>
<p>Before we can send push messages, we need to get the push subscription.
We do this by calling the <strong>registration.pushManager.subscribe()</strong> method.</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">async</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">subscribeUser</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">registration</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">navigator</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">serviceWorker</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">ready</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">subscription</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">registration</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">pushManager</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">subscribe</span><span style="color: #D8DEE9FF">(</span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">userVisibleOnly</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">applicationServerKey</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">urlBase64ToUint8Array</span><span style="color: #D8DEE9FF">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">      </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">BBAtkVJ3LU8ab8R49xs-WD3PVt7tfLmWcDZHH8zN01ZfUTEc3VTs2PQlpsZxTbAeNPe11vRwaCkf2DpQZ2LTsG8</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    )</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF">)</span><span style="color: #81A1C1">;</span></span>

<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #D8DEE9">console</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">log</span><span style="color: #D8DEE9FF">(</span><span style="color: #81A1C1">JSON</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">stringify</span><span style="color: #D8DEE9FF">(</span><span style="color: #D8DEE9">subscription</span><span style="color: #D8DEE9FF">))</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">subscription</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>To get back the subscription object, we need to pass in <strong>userVisibleOnly</strong>, and the
<strong>applicationServerKey</strong>.</p>
<p><strong>userVisibleOnly</strong>:\
You must pass in a value of true. This means that you should not send silent pushes - web pushes without showing a notification.</p>
<p>This was added because people were scared that the Push API might be abused for malicious stuff,
without the user knowing.</p>
<p><strong>applicationServerKey</strong>:\
The applicationServerKey is used by the push service of the browser to identify your web app.
It is the public key that we are sending here, there also is a private key that should be - you guessed it - kept private.
We will need it later to send push messages.</p>
<p>To generate the KeyPair you can head over to <a href="https://web-push-codelab.glitch.me/" target="_blank" rel="nofollow noopener noreferrer">web-push-codelab.glitch.me</a>.</p>
<h2 id="the-push-subscription"><a href="#the-push-subscription" aria-hidden="true"><span class="icon icon-link"></span></a>THE PUSH SUBSCRIPTION</h2>
<p>The subscription that gets returned from <strong>registration.pushManager.subscribe()</strong> method looks like this:</p>
<pre class="shiki" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">endpoint</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">https://fcm.googleapis.com/fcm/send/cR3Ymg9at0M:APA91bHXt5kDJ__JY-L3ZmrcC3VOlnF400_s9HvZQgmyjM9tbqxvLRrQuTBeRQoifxMItb_cTQ3Sxl7t553R2Y53dQSBncStFdu99A8qejCamh4XHeJKVCS3bEEM1fCOPLEuZPg7BJqn</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">expirationTime</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">keys</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">p256dh</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">BO8IrAO6iEJOpVVkCBMMGt_iBAWUMWdjc4r9GOqiRS1rmPR5KYtZhnkeBb5fHqHp7pudxY6Dy8neJPgNwmKn4q8</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">auth</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">CPWYdCPWXfICigMixAqJ4g</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>The most important property is the <strong>endpoint</strong>. The endpoint is the push services URL. To create a push message we need to send our message to this URL. The endpoint is also a user ID because every endpoint is unique to one user.</p>
<p>Once we have the push subscription from a user, we can finally send web push messages to this user.</p>
<p>In Part 3 we will get into the server side of things.</p>
</div><div class="mb-8"><a href="/blog" class="font-bold uppercase">Back to Blog</a></div></div></main><footer class="text-white"><div class="container mx-auto flex flex-col lg:flex-row items-center justify-between py-8"><div class="mb-8 lg:mb-0"><div>
          Copyright 2022. All rights reserved.
        </div><div><a href="/rss.xml" class="text-white hover:text-gray-400 font-normal">RSS Feed</a>
          |
          <a href="/sitemap.xml" class="text-white hover:text-gray-400 font-normal">Sitemap</a></div></div><ul class="flex items-center space-x-8"><li><a href="mailto:carsten.behrens1@gmail.com" title="Email" class="text-white hover:text-gray-400"><svg width="25" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 0h20A2.5 2.5 0 0 1 25 2.5v15a2.5 2.5 0 0 1-2.5 2.5h-20A2.5 2.5 0 0 1 0 17.5v-15C0 1.125 1.125 0 2.5 0zm20 4.225V2.5h-20v1.725l10 5 10-5zm0 2.8l-9.438 4.713a1.25 1.25 0 0 1-1.124 0L2.5 7.025V17.5h20V7.025z" fill-rule="nonzero"></path></svg></a></li><li><a href="https://github.com/carstenbehrens" target="_blank" title="Github" class="text-white hover:text-gray-400"><svg width="20" height="19" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c1.814 0 3.487.435 5.02 1.306a9.827 9.827 0 0 1 3.639 3.542A9.33 9.33 0 0 1 20 9.734c0 2.121-.636 4.03-1.908 5.723a9.783 9.783 0 0 1-4.928 3.518c-.234.042-.408.012-.52-.09a.49.49 0 0 1-.17-.38l.006-.969c.005-.621.007-1.19.007-1.705 0-.82-.226-1.42-.677-1.8.495-.05.94-.126 1.335-.228a5.4 5.4 0 0 0 1.223-.494 3.62 3.62 0 0 0 1.055-.843c.282-.334.512-.777.69-1.33.178-.554.267-1.19.267-1.909a3.7 3.7 0 0 0-1.028-2.61c.32-.77.286-1.631-.105-2.586-.243-.076-.594-.03-1.054.14-.46.168-.86.354-1.198.557l-.495.304a9.478 9.478 0 0 0-2.5-.33c-.86 0-1.693.11-2.5.33a11.6 11.6 0 0 0-.553-.342c-.23-.135-.593-.298-1.088-.488-.494-.19-.863-.247-1.106-.171-.391.955-.426 1.816-.105 2.585A3.7 3.7 0 0 0 3.62 9.227c0 .719.089 1.352.267 1.902.178.549.406.993.683 1.33.278.339.627.622 1.048.85a5.4 5.4 0 0 0 1.224.494c.395.102.84.178 1.335.228-.338.305-.551.74-.638 1.306a2.631 2.631 0 0 1-.586.19 3.782 3.782 0 0 1-.742.063c-.287 0-.57-.09-.853-.272a2.256 2.256 0 0 1-.723-.792 2.068 2.068 0 0 0-.631-.66c-.256-.168-.471-.27-.645-.304l-.26-.038c-.182 0-.308.02-.378.057-.07.038-.09.087-.065.146.026.06.065.118.117.178.053.059.109.11.17.152l.09.063c.192.085.38.245.567.482.187.236.324.452.41.646l.13.292c.113.32.304.58.574.78.269.198.56.325.872.38.312.054.614.084.905.088.29.004.532-.01.723-.044l.299-.05c0 .32.002.694.007 1.12l.006.692a.49.49 0 0 1-.17.38c-.112.101-.286.13-.52.089a9.783 9.783 0 0 1-4.928-3.518C.636 13.763 0 11.855 0 9.734a9.33 9.33 0 0 1 1.341-4.886 9.827 9.827 0 0 1 3.64-3.542C6.512.436 8.185 0 10 0zM3.79 13.98c.025-.058-.005-.11-.092-.151-.087-.026-.143-.017-.17.025-.025.06.005.11.092.152.078.05.134.042.17-.025zm.403.432c.06-.043.052-.11-.026-.203-.087-.076-.157-.089-.209-.038-.06.042-.052.11.026.203.087.084.157.097.209.038zm.39.57c.078-.06.078-.14 0-.24-.07-.11-.143-.136-.221-.077-.078.042-.078.118 0 .228.078.11.152.14.221.089zm.547.532c.07-.067.052-.148-.052-.24-.104-.102-.19-.115-.26-.039-.078.068-.061.148.052.241.104.102.19.114.26.038zm.742.317c.026-.093-.03-.16-.169-.203-.13-.033-.213-.004-.247.09-.035.092.021.155.169.19.13.05.213.025.247-.077zm.82.064c0-.11-.073-.157-.22-.14-.14 0-.209.047-.209.14 0 .11.074.156.221.139.14 0 .209-.046.209-.14zm.756-.127c-.017-.093-.096-.131-.234-.114-.14.025-.2.088-.183.19.018.101.096.135.235.101.139-.034.2-.093.182-.177z" fill-rule="nonzero"></path></svg></a></li><li><a href="https://twitter.com/cabe_mono" target="_blank" title="Twitter" class="text-white hover:text-gray-400"><svg width="20" height="17" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19.807 1.943a8.588 8.588 0 0 1-2.036 2.135 11.918 11.918 0 0 1-.465 3.854 12.085 12.085 0 0 1-1.452 3.177 12.426 12.426 0 0 1-2.318 2.691c-.897.78-1.978 1.402-3.243 1.867-1.265.464-2.618.697-4.06.697-2.27 0-4.348-.618-6.233-1.854.293.034.62.051.98.051 1.885 0 3.565-.588 5.04-1.764a3.915 3.915 0 0 1-2.363-.825 4.038 4.038 0 0 1-1.432-2.039c.276.043.532.064.766.064.36 0 .717-.047 1.068-.14A3.982 3.982 0 0 1 1.73 8.43c-.617-.754-.925-1.63-.925-2.627v-.051c.57.324 1.182.498 1.835.524a4.1 4.1 0 0 1-1.32-1.47 4.078 4.078 0 0 1-.49-1.969c0-.75.185-1.445.553-2.084a11.548 11.548 0 0 0 3.702 3.05 11.163 11.163 0 0 0 4.669 1.271c-.067-.324-.1-.639-.1-.946 0-1.142.395-2.116 1.187-2.92C11.632.402 12.589 0 13.712 0c1.173 0 2.161.435 2.966 1.304a7.878 7.878 0 0 0 2.576-.997 3.997 3.997 0 0 1-1.785 2.275 7.98 7.98 0 0 0 2.338-.639z" fill-rule="nonzero"></path></svg></a></li></ul></div></footer><div style="display:none"><svg id="dots-triangle" width="170" height="170" xmlns="http://www.w3.org/2000/svg"><path d="M168.152 170a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 0a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.479 0a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zM94.24 133.043a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 36.956a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 55.434a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.479 73.913a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.478 92.391a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zM1.848 133.044a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.695zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696z" fill="#1E40AF" fill-rule="evenodd" opacity=".503"></path></svg></div></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Web Push Notifications Part 2","date":"November 10, 2019","content":"\u003Cp\u003EIn this part we will add event listeners for the push event in the service worker.\nNext we will get the PushSubscription.\u003C\u002Fp\u003E\n\u003Ch2 id=\"table-of-contents\"\u003E\u003Ca href=\"#table-of-contents\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETABLE OF CONTENTS\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EHandling Push Events\u003C\u002Fli\u003E\n\u003Cli\u003EDebug Push Notifications\u003C\u002Fli\u003E\n\u003Cli\u003EGetting the Push Subscription\u003C\u002Fli\u003E\n\u003Cli\u003EThe Push Subscription\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"handling-push-events\"\u003E\u003Ca href=\"#handling-push-events\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHANDLING PUSH EVENTS\u003C\u002Fh2\u003E\n\u003Cp\u003EWhen we send a push message to a user, the push event gets triggered in the service worker.\nTo show this push notification we need to trigger the notification in the service worker.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #2e3440ff\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EaddEventListener\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003Epush\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003Ejson\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eicon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EwaitUntil\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eregistration\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EshowNotification\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eicon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  )\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn this code snipped handles the push events.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Cstrong\u003Eregistration.showNotification()\u003C\u002Fstrong\u003E method returns a promise, that is resolved when the notification is shown.\nThe \u003Cstrong\u003Eevent.waitUntil()\u003C\u002Fstrong\u003E method tells the browser that work is ongoing until the promise settles.\nThis extends the lifetime of the push event until the showNotification Promise resolves.\u003C\u002Fp\u003E\n\u003Ch2 id=\"debug-push-notifications\"\u003E\u003Ca href=\"#debug-push-notifications\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDEBUG PUSH NOTIFICATIONS\u003C\u002Fh2\u003E\n\u003Cp\u003ETo test that our push event handler works, we can send a fake push message with the Chrome DevTools.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 1000 440' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-29df6ca25ff67ccebabb8351124da8f2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-29df6ca25ff67ccebabb8351124da8f2)' width='1000' height='440' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIZ0lEQVRYw81YaXfaSBD0\u002F\u002F83yVdv7DjrbBKvYwM2IAQSpwBJgLhPodquFiIYY%2bLYcd7qvUZiNJqjpo\u002FqPmm2Wmg5dVitETLlAXpBH%2bPREPV6HeVyWe%2bVSgXdbhfj8RiO05C2hrY5ThOTyQSe66JWq8FpyDuR4XCIwWAA27K0vVqtotlsad92u63fUvgukX6\u002Fj6F8U91pd10P0%2bkEQdeDXSqgVrZQr1rybKLbcTGdjNFoODrXaDR6KDJe8PkfdDwfA%2b87vHYNQX%2bATqej6%2bM6LFnfSa0mmy8WkK%2bPcFfuy0Z70mGgCyyWSrBtG5aI53n6IRdm22UUTROVak0nawuIpVJRvymLcDP9IJA%2bBZ2kJOM4jhP3bbd0zBiEsr7n%2bN1eNwbNtvR9qWTJ5uro9MfImE2cXqZweZ3H5xsTF1d53BaacLsj7RPIXAnoKnyWtuDqX\u002FhyOEHzAq2GJYc7QKvV1PW1ZM0KwHA40pPlIH1%2bzMULUmzjia3XayRXFEV4dO20sS\u002F7rFYrleQbCt8tl0uEYbht2xX25\u002FsH7esQg8kSlc4aTh9oUALAGQBlaesMlzIBx42\u002FfSBcg8zP%2bVayhXDNOZYP5uEeTyqi5qnULYrFEnK5HO7v7%2bH7Hd08UeXFjrm8gYpoiyknUxO1u8\u002FlkTNM5I2CtNno9YJHIO1v8lDb7rvjV7QnP1qf\u002FiQ62ms6neKEakm1pprSPmjPfseXDfUUAC6OiDlNUZ3BEJ6A05XNEiRfzMXzfbTFzmazOV5\u002FHQZn\u002FYRErxBePOSTxWIBU%2bz5\u002Ffv3Yk8N5HNZGIaBQsFUp8FrNpthIlpAu26JDROcUFSadjSVQQL532676ihpPkHQE4B88Rs%2bJoIyzasnNk4\u002Fwj58x\u002F80OVcA70kbwV\u002FvaMlbXg8AoKe\u002FubnB6ekpMpkMbm9vkU6ntY0mkQDQ7we6ES6eG%2bfGGurxB%2br96eV9P94gN8TNMsLM5nN1OgSJ0YAb1j69rpoNx3LdNjrStl4fN5PfKVsAqP7c%2bMePH5EV%2b09n0gpAOpUSLShsndZr0X7ORUf5p2TrBGkCxWIR7969Q1NCVS6bBUMjzaJer22jAIGgsD89aTLI7z6V36Xiu\u002F4j2vMZiaapBtAJ0qabzTg%2bxvYZqJpS5RMALHGSKdGMq6srNQ9fbDae7LlA4MEz3lC1VxL3bktjfEr38eFGYn5viXt7jC%2b5If7JDvEx1YdRn2Exn5IHDFUVGBJ432dUCQC8Jyf\u002FMrOIHoSnt\u002FBzuyAsBYTFMhae%2bCqM9Hm2iNvCNZRlnlSFjeXzebV\u002Fev7RHgi7RGj\u002FIrGgg6QowZBJh9MQw0moE01mIfrjlfxfYSqsJBTHOGt5SlDwBEf4PSA8r6%2baQLBRf0YDqj%2bppLJCMQc%2bJwAcUjUiSE7N72bTMZrdJa4KI6RE\u002FTL2BN\u002FNscq\u002F0lb0xFTEjLy0ieHqdc7yZw73l6IAN8lwd3FxobyaHKBUJMMzlCDtAvCzBa\u002FENJSCrngXhykUdaHUdKXOc0lnSvXcONLlhpay\u002F5%2bI\u002F\u002FtmsgWAyQcdGzM\u002Fbpr3xibrO0RO9pFOQGI8z2TzmkRlhSpX647Q5qaMHydWJaHMTrMtGaODqkSaomVruyNmsX9ybwXIQQAYBund6xtKnKTBlOdqQHSElb9kI2%2blDY8AmAtTowacn5%2bLL3DUHMplW04wC1OIUHREA5IMTzM\u002FaQom4jsmfQkvCx2ckYUmMBeVpwkwX2B\u002FzjmXPmoy8p9sMSYokTrS9Z\u002FUAC6Sufm3b9\u002FgbooVNaGsPH3WBhjnnwJgsZhrnt%2bUHHs%2bWeCudYdb60Z8iYuSZWsCZZUrmkGaomWpuxxs%2bc8MkrWEutMSE7CQzRfEJOS\u002Fv8Jf3yWvCBYxwEcc2EvBeQQAQxg5%2btevX9X%2byQAJQKFgaDL01IRvpaLr6G3N46APoAO8vLzUyg6rJIbwApa7SIwO%2bYAfjGu1VXWSIz6zpEYukRRVmDrHBZe%2bPut74Res2jChionYBEMyUgm\u002F\u002FHawaZtMpiJj5RQ9iZ1j4Rjr6NcTpkOO%2bwEAST2A2RwzPKq\u002FK6TlZwBw45rNielwsaTPWcOEVanCMMXr22Xc503Ym\u002F9U9VyhiIJoGf8XrTJMMZVqrSH3spqDUbRQKIojFhMpFG3UZC29UYjL%2bwGuzRFmy7W63P26wHqHAMW0%2bwf3PFSk2QLATdKW6aSSMhiFp8TT%2bRUe8H%2b44nVt5Dka0JR4TwdFDaCactOJ7FLhp1CkFlB9CeBUvLzRnsD0Jfmo93HfGIpT9OQ%2bQEHargsO0tUe0pUubrRd3tsdpOS\u002F0Z7Ks6\u002FCPmzL1AL9n6nKvdzR\u002FmzLyPusM9I73xvuDHf1gVDvhUScFRrdhcpY%2bDfrikcB8DxXVZ7enBtJEiLej5nAFgAZhEUOTaamM1xXhQq3Q3y1eviUd3GWqeFLqattH27L%2bJCq4tLwcHpj4fzOwd\u002FS5y9pv65NcJ6py3NF%2bvekX0X7se38roGLrINPuZaM18BZuqpjfzZ9HfOqMpJvxNcIAGSdpfYSN5WF5iUEIDoGAE%2bOPODs7Exr\u002FuQB1AYmSIwOx8LO02YRHc8GD7VH4YG%2b0ZGCaPTwW5E4U2WiEUsYLh9xikcA8IeOj5GAzizRBrYx0TmWYCTlMpbAFoulmgGLpq4f1\u002Fjbro9Od1NA7fTQars6ptfpoinPY5mb44QbEvTyCk%2b03fxCTMB2l6h2VptUOHwymdsSIZ703xIGbauETOZOT98w8kqJ12F4NBYTABY0E7bHKrErG9Zqs%2bQS3U1xxfV8AcTTfIFV5EazpSGPi2cIfW2JS%2bv\u002Fqzj5Mpw5LFeY52K1BeDQ2rUsvuv0ErtnDE6ek%2bLHoRLYfq3gJUWSt6j3CZ1SiTba8dS6ub\u002F\u002FAC1JEwe7\u002FnBRAAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e\" width=\"1000\" alt=\"Chrome DevTools\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fchrome-dev-tools.82a2fbd.104d49fd853c0ac67848a38ae3fc311f.png 480w, \u002Fassets\u002Fstatic\u002Fchrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png 1000w\" data-sizes=\"(max-width: 1000px) 100vw, 1000px\" data-src=\"\u002Fassets\u002Fstatic\u002Fchrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fchrome-dev-tools.97c148e.104d49fd853c0ac67848a38ae3fc311f.png\" width=\"1000\" alt=\"Chrome DevTools\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETo do this you can copy and paste the JSON example below.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #2e3440ff\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003ENew Blog Post: Web Push Notifications Part 1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003EGet a better understanding of how Web Push Notifications work\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow after clicking push, the push notification should be shown.\u003C\u002Fp\u003E\n\u003Ch2 id=\"getting-the-push-subscription\"\u003E\u003Ca href=\"#getting-the-push-subscription\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGETTING THE PUSH SUBSCRIPTION\u003C\u002Fh2\u003E\n\u003Cp\u003EBefore we can send push messages, we need to get the push subscription.\nWe do this by calling the \u003Cstrong\u003Eregistration.pushManager.subscribe()\u003C\u002Fstrong\u003E method.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #2e3440ff\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #81A1C1\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EsubscribeUser\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eregistration\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Enavigator\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EserviceWorker\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eready\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Esubscription\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Eregistration\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003EpushManager\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003Esubscribe\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EuserVisibleOnly\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EapplicationServerKey\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003EurlBase64ToUint8Array\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003EBBAtkVJ3LU8ab8R49xs-WD3PVt7tfLmWcDZHH8zN01ZfUTEc3VTs2PQlpsZxTbAeNPe11vRwaCkf2DpQZ2LTsG8\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    )\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #88C0D0\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Esubscription\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E))\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9\"\u003Esubscription\u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo get back the subscription object, we need to pass in \u003Cstrong\u003EuserVisibleOnly\u003C\u002Fstrong\u003E, and the\n\u003Cstrong\u003EapplicationServerKey\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EuserVisibleOnly\u003C\u002Fstrong\u003E:\\\nYou must pass in a value of true. This means that you should not send silent pushes - web pushes without showing a notification.\u003C\u002Fp\u003E\n\u003Cp\u003EThis was added because people were scared that the Push API might be abused for malicious stuff,\nwithout the user knowing.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EapplicationServerKey\u003C\u002Fstrong\u003E:\\\nThe applicationServerKey is used by the push service of the browser to identify your web app.\nIt is the public key that we are sending here, there also is a private key that should be - you guessed it - kept private.\nWe will need it later to send push messages.\u003C\u002Fp\u003E\n\u003Cp\u003ETo generate the KeyPair you can head over to \u003Ca href=\"https:\u002F\u002Fweb-push-codelab.glitch.me\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Eweb-push-codelab.glitch.me\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"the-push-subscription\"\u003E\u003Ca href=\"#the-push-subscription\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETHE PUSH SUBSCRIPTION\u003C\u002Fh2\u003E\n\u003Cp\u003EThe subscription that gets returned from \u003Cstrong\u003Eregistration.pushManager.subscribe()\u003C\u002Fstrong\u003E method looks like this:\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #2e3440ff\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Eendpoint\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003Ehttps:\u002F\u002Ffcm.googleapis.com\u002Ffcm\u002Fsend\u002FcR3Ymg9at0M:APA91bHXt5kDJ__JY-L3ZmrcC3VOlnF400_s9HvZQgmyjM9tbqxvLRrQuTBeRQoifxMItb_cTQ3Sxl7t553R2Y53dQSBncStFdu99A8qejCamh4XHeJKVCS3bEEM1fCOPLEuZPg7BJqn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003EexpirationTime\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #81A1C1\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Ekeys\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Ep256dh\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003EBO8IrAO6iEJOpVVkCBMMGt_iBAWUMWdjc4r9GOqiRS1rmPR5KYtZhnkeBb5fHqHp7pudxY6Dy8neJPgNwmKn4q8\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #8FBCBB\"\u003Eauth\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #A3BE8C\"\u003ECPWYdCPWXfICigMixAqJ4g\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E&quot;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #D8DEE9FF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #ECEFF4\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe most important property is the \u003Cstrong\u003Eendpoint\u003C\u002Fstrong\u003E. The endpoint is the push services URL. To create a push message we need to send our message to this URL. The endpoint is also a user ID because every endpoint is unique to one user.\u003C\u002Fp\u003E\n\u003Cp\u003EOnce we have the push subscription from a user, we can finally send web push messages to this user.\u003C\u002Fp\u003E\n\u003Cp\u003EIn Part 3 we will get into the server side of things.\u003C\u002Fp\u003E\n","tags":[{"title":"JavaScript","path":"\u002Ftag\u002FJavaScript\u002F"},{"title":"Service Worker","path":"\u002Ftag\u002FService%20Worker\u002F"},{"title":"Frontend","path":"\u002Ftag\u002FFrontend\u002F"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.957787dd.js" defer></script><script src="/assets/js/page--src--templates--post-vue.7d448d5a.js" defer></script>
  </body>
</html>
